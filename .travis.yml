language: php
php:
  - '7.0'
  - '7.1'
  - '7.2'
before_script:
  - composer self-update
  - composer install --dev
mysql:
  database: zf2auth
  username: root
  encoding: utf8
script:
  - php vendor/bin/phpunit -c phpunit.xml  
after_success:
  - travis_retry php vendor/bin/coveralls
  # or enable logging
  - travis_retry php vendor/bin/coveralls -v
before_install:
  - sudo mysql -e "use mysql; update user set authentication_string=PASSWORD('mysql') where User='root'; update user set plugin='mysql_native_password';FLUSH PRIVILEGES;"
  - sudo service mysql restart
  - mysql -e 'drop database if exists zf2auth;'
  - mysql -e 'create database if not exists zf2auth;'
  - mysql -e 'show databases;'
  - mysql < datastructure/structure.sql